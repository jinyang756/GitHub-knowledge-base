<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>国泰海通证券知识库</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="国泰海通证券知识库 - 专业金融知识分享平台">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- 网站加密脚本 - 放置在docsify加载前 -->
  <script>
    // 配置项
    const ACCESS_CODES = ["夜风", "yefeng"]; // 支持中英文暗号
    const STORAGE_KEY = "kt_verified";       // 验证状态存储键
    const ERROR_COUNT_KEY = "kt_error_cnt";  // 错误次数存储键
    const MAX_ERRORS = 5;                    // 最大错误次数
    const VALID_DURATION = 86400000;         // 验证有效期（24小时，单位：毫秒）

    // 检查是否已被锁定
    function isLocked() {
      const errorCount = parseInt(localStorage.getItem(ERROR_COUNT_KEY) || "0");
      return errorCount >= MAX_ERRORS;
    }

    // 检查是否已通过验证
    function isVerified() {
      return ACCESS_CODES.includes(localStorage.getItem(STORAGE_KEY));
    }
  </script>

  <!-- 配置Tailwind自定义颜色和字体 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'mystic-red': '#9b2226',
            'mystic-blue': '#0f172a',
            'mystic-purple': '#4c1d95',
            'glass': 'rgba(15, 23, 42, 0.6)',
            'glass-light': 'rgba(155, 34, 38, 0.3)',
          },
          fontFamily: {
            'occult': ['Garamond', 'Georgia', 'serif'],
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .text-shadow {
        text-shadow: 0 0 8px rgba(155, 34, 38, 0.7);
      }
      .glow-border {
        box-shadow: 0 0 10px rgba(155, 34, 38, 0.5), 
                    0 0 20px rgba(15, 23, 42, 0.3);
      }
      .glass-effect {
        backdrop-filter: blur(10px);
        background: rgba(15, 23, 42, 0.6);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
      .bg-gradient-mystic {
        background: linear-gradient(135deg, rgba(15, 23, 42, 0.8) 0%, rgba(76, 29, 149, 0.7) 50%, rgba(155, 34, 38, 0.7) 100%);
      }
      .animate-float {
        animation: float 6s ease-in-out infinite;
      }
      @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-15px); }
        100% { transform: translateY(0px); }
      }
      .animate-pulse-slow {
        animation: pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }
      .animate-shake {
        animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
      }
      @keyframes shake {
        10%, 90% { transform: translateX(-1px); }
        20%, 80% { transform: translateX(2px); }
        30%, 50%, 70% { transform: translateX(-3px); }
        40%, 60% { transform: translateX(3px); }
      }
    }
  </style>

  <!-- 自定义CSS样式 -->
  <style>
    /* CSS变量定义 - 方便主题调整 */
    :root {
      --primary-color: #0F52BA; /* 国泰海通蓝色 */
      --secondary-color: #D4AF37; /* 金色 */
      --text-color: #34495e;
      --heading-color: #2c3e50;
      --sidebar-width: 280px;
      --code-font: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
    }
    
    /* 暗黑模式支持 */
    @media (prefers-color-scheme: dark) {
      :root {
        --primary-color: #1a73e8;
        --text-color: #e0e0e0;
        --heading-color: #ffffff;
      }
    }
    
    /* 全局样式重置 */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: var(--text-color);
      background-color: #f5f5f7;
      background-image: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      background-attachment: fixed;
    }
    
    /* 底层背景渐变和几何纹理 */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
      z-index: -1;
    }
    
    /* 主容器样式 */
    .app-container {
      position: relative;
      min-height: 100vh;
    }
    
    /* 页头氛围渐变图层 */
    .app-header-gradient {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 120px;
      background: linear-gradient(135deg, var(--primary-color) 0%, #3B82F6 100%);
      opacity: 0.9;
      z-index: -1;
      filter: blur(30px);
      transform: translateY(-50%);
    }
    
    /* 顶部导航栏 */
    .navbar {
      background-color: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 0.8rem 1.5rem;
      border-bottom: 1px solid #e1e5e9;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    /* 主内容区域布局 */
    .main-layout {
      display: flex;
      min-height: calc(100vh - 70px);
    }
    
    /* 侧边框架 */
    .sidebar {
      width: var(--sidebar-width);
      background-color: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-right: 1px solid #e1e5e9;
      padding: 1.5rem 0;
      transition: transform 0.3s ease;
      position: fixed;
      height: 100vh;
      overflow-y: auto;
      z-index: 99;
    }
    
    /* 侧边栏遮罩层 - 移动设备 */
    .sidebar-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 98;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    
    .sidebar-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    /* 侧边栏层级设计 */
    .sidebar-nav {
      padding: 0 1rem;
    }
    
    /* 侧边栏图标样式 */
    .sidebar-nav a {
      display: flex;
      align-items: center;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      transition: all 0.2s ease;
      color: var(--text-color);
      text-decoration: none;
    }
    
    .sidebar-nav a:hover {
      background-color: rgba(15, 82, 186, 0.08);
      color: var(--primary-color);
    }
    
    /* 激活的侧边栏项目 */
    .sidebar-nav li.active > a {
      background-color: rgba(15, 82, 186, 0.15);
      color: var(--primary-color);
      font-weight: 500;
      border-left: 3px solid var(--primary-color);
      padding-left: calc(1rem - 3px);
    }
    
    /* 二级菜单样式 */
    .sidebar-nav ul ul {
      margin-left: 0.5rem;
      margin-top: 0.25rem;
    }
    
    .sidebar-nav ul ul a {
      font-size: 0.9rem;
    }
    
    /* 主框架内容区 */
    .main-content {
      flex: 1;
      margin-left: var(--sidebar-width);
      padding: 2rem;
      transition: margin-left 0.3s ease;
    }
    
    /* 内容卡片 */
    .markdown-section {
      max-width: 900px;
      margin: 0 auto;
      background-color: rgba(255, 255, 255, 0.95);
      border-radius: 12px;
      padding: 2rem;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      backdrop-filter: blur(10px);
    }
    
    /* 首页特定样式 */
    .markdown-section.home-page {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.9) 100%);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }
    
    /* 首页搜索区域样式增强 */
    .markdown-section.home-page .search {
      margin: 2rem 0;
      text-align: center;
    }
    
    /* 首页核心内容样式优化 */
    .markdown-section.home-page h1 {
      color: var(--primary-color);
      text-align: center;
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }
    
    .markdown-section.home-page h2 {
      color: var(--secondary-color);
      text-align: center;
      font-size: 1.5rem;
      margin-bottom: 2rem;
      font-weight: 400;
    }
    
    /* 快速导航样式增强 */
    .quick-navigation {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1rem;
      margin: 2rem 0;
    }
    
    .quick-navigation a {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      background-color: rgba(15, 82, 186, 0.08);
      color: var(--primary-color);
      border-radius: 25px;
      text-decoration: none;
      transition: all 0.2s ease;
      font-weight: 500;
      border: 1px solid rgba(15, 82, 186, 0.1);
    }
    
    .quick-navigation a:hover {
      background-color: rgba(15, 82, 186, 0.15);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(15, 82, 186, 0.15);
    }
    
    /* 内容区装饰角 */
    .markdown-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 50px;
      height: 50px;
      border-top: 3px solid var(--primary-color);
      border-left: 3px solid var(--primary-color);
      border-radius: 12px 0 0 0;
    }
    
    .markdown-section::after {
      content: '';
      position: absolute;
      bottom: 0;
      right: 0;
      width: 50px;
      height: 50px;
      border-bottom: 3px solid var(--primary-color);
      border-right: 3px solid var(--primary-color);
      border-radius: 0 0 12px 0;
    }
    
    /* Markdown内容样式 */
    .markdown-section h1, .markdown-section h2, .markdown-section h3, .markdown-section h4, .markdown-section h5, .markdown-section h6 {
      color: var(--heading-color);
      margin-top: 2rem;
      margin-bottom: 1rem;
      font-weight: 600;
    }
    
    .markdown-section h1 {
      font-size: 2rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid #eaecef;
    }
    
    .markdown-section h2 {
      font-size: 1.5rem;
      padding-bottom: 0.3rem;
      border-bottom: 1px solid #eaecef;
    }
    
    .markdown-section p {
      margin-bottom: 1rem;
    }
    
    /* 表格样式 */
    .markdown-section table {
      width: 100%;
      border-collapse: collapse;
      margin: 1.5rem 0;
    }
    
    .markdown-section th {
      background-color: rgba(15, 82, 186, 0.1);
      color: var(--primary-color);
      font-weight: 600;
    }
    
    .markdown-section th, .markdown-section td {
      padding: 0.75rem;
      border: 1px solid #eaecef;
      text-align: left;
    }
    
    .markdown-section tr:nth-child(even) {
      background-color: rgba(0, 0, 0, 0.02);
    }
    
    /* 标签样式 */
    .markdown-section code {
      font-family: var(--code-font);
      background-color: #f1f1f1;
      padding: 0.2rem 0.4rem;
      border-radius: 4px;
      font-size: 0.9em;
    }
    
    .markdown-section pre {
      background-color: #f8f8f8;
      padding: 1rem;
      border-radius: 8px;
      overflow-x: auto;
      margin: 1.5rem 0;
      border: 1px solid #eaecef;
    }
    
    .markdown-section pre > code {
      background-color: transparent;
      padding: 0;
    }
    
    /* 主容器样式 */
      .app-container {
        position: relative;
        min-height: 100vh;
        padding-bottom: 120px; /* 新增：给页脚留出空间，避免内容被遮挡 */
      }
      
      /* 页脚样式 */
      .footer-custom {
        background-color: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        padding: 2rem;
        text-align: center;
        border-top: 1px solid #e1e5e9;
        margin-left: var(--sidebar-width);
        transition: margin-left 0.3s ease;
        position: absolute;
        bottom: 0;
        width: 100%;
      }
    
    .footer-content p {
      margin-bottom: 0.5rem;
      color: #666;
      font-size: 0.9rem;
    }
    
    .footer-content a {
      color: var(--primary-color);
      text-decoration: none;
      transition: color 0.2s ease;
    }
    
    .footer-content a:hover {
      color: var(--secondary-color);
      text-decoration: underline;
    }
    
    /* 侧边栏切换按钮容器 */
    .sidebar-toggle-container {
      position: fixed;
      left: 1rem;
      top: 1rem;
      z-index: 101;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.25rem;
    }
    
    /* 侧边栏切换按钮 */
    .sidebar-toggle {
      width: 40px;
      height: 40px;
      background-color: rgba(255, 255, 255, 0.95);
      border: 1px solid #ddd;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
      color: var(--primary-color);
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
    }
    
    .sidebar-toggle:hover {
      background-color: var(--primary-color);
      color: white;
      transform: scale(1.1);
    }
    
    /* 切换按钮文字说明 */
    .toggle-text {
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.8rem;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
      white-space: nowrap;
    }
    
    .sidebar-toggle-container:hover .toggle-text {
      opacity: 1;
      visibility: visible;
    }
    
    /* 返回顶部按钮容器 */
    .back-to-top-container {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      z-index: 99;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.25rem;
    }
    
    /* 返回顶部按钮 */
    #back-to-top {
      width: 50px;
      height: 50px;
      background-color: rgba(15, 82, 186, 0.9);
      border: none;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: white;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 4px 12px rgba(15, 82, 186, 0.3);
      opacity: 0;
      visibility: hidden;
      backdrop-filter: blur(10px);
    }
    
    body.show-back-to-top #back-to-top {
      opacity: 1;
      visibility: visible;
    }
    
    #back-to-top:hover {
      background-color: var(--primary-color);
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(15, 82, 186, 0.4);
    }
    
    /* 返回顶部按钮文字说明 */
    .back-to-top-text {
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.8rem;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
      white-space: nowrap;
    }
    
    .back-to-top-text.show-tooltip {
      opacity: 1;
      visibility: visible;
    }
    
    /* 修复侧边栏样式 */
    .app { position: relative; }
    
    /* 响应式设计 - 大屏幕 */
    @media (max-width: 1024px) {
      :root {
        --sidebar-width: 250px;
      }
      
      .markdown-section {
        padding: 1.5rem;
      }
    }
    
    /* 响应式设计 - 小屏幕 */
    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-100%);
        width: 280px;
      }
      
      .sidebar.open {
        transform: translateX(0);
      }
      
      .sidebar.open ~ .main-content {
        margin-left: 0;
      }
      
      /* 侧边栏打开时给主内容添加遮罩 */
      .sidebar.open ~ .main-content::after {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 99;
      }
      
      .main-content {
        margin-left: 0;
        padding: 1.5rem 1rem;
      }
      
      .navbar {
        padding: 1rem;
      }
      
      .navbar > div > a {
        margin-right: 1rem;
        font-size: 0.9rem;
      }
      
      .markdown-section {
        padding: 1.25rem;
      }
      
      .footer-custom {
        padding: 1.5rem 1rem;
      }
    }
    
    @media (max-width: 480px) {
      .sidebar.open {
        width: 240px;
      }
      
      .markdown-section {
        padding: 1rem;
      }
      
      .footer-content p {
        font-size: 0.85rem;
      }
    }
  </style>
</head>
<body class="min-h-screen overflow-hidden font-occult">
  <!-- 如果已验证通过，则显示正常内容 -->
  <div id="normalContent" class="hidden">
    <!-- 主容器 -->
    <div id="app"></div>
  </div>
  
  <!-- 如果未验证，则显示验证界面 -->
  <div id="verificationScreen" class="">
    <!-- 背景图与渐变覆盖层 -->
    <div class="fixed inset-0 z-0">
      <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/3372683a8e2d497dba89c9c8bd7f90e5.png~tplv-a9rns2rl98-24:720:720.png?rk3s=1fb89129&x-expires=1757093018&x-signature=hSc%2BVQXazL8xQPDI8IfM3QKdtLg%3D" 
           alt="神秘风格背景图，带有深色纹理和神秘符号" 
           class="w-full h-full object-cover">
      <div class="absolute inset-0 bg-gradient-mystic"></div>
    </div>

    <!-- 装饰性元素 -->
    <div class="fixed inset-0 z-10 pointer-events-none">
      <div class="absolute top-1/4 left-1/4 w-64 h-64 rounded-full bg-mystic-red/20 blur-3xl animate-pulse-slow"></div>
      <div class="absolute bottom-1/3 right-1/4 w-80 h-80 rounded-full bg-mystic-blue/30 blur-3xl animate-pulse-slow" style="animation-delay: 2s;"></div>
    </div>

    <!-- 主内容 -->
    <div class="relative z-20 min-h-screen flex flex-col items-center justify-center px-4 py-8">
      <!-- 标题 -->
      <div class="mb-12 text-center animate-float">
        <h1 class="text-[clamp(2.5rem,6vw,4rem)] font-bold text-white mb-4 text-shadow tracking-wider">
          国泰海通证券知识库
        </h1>
        <p class="text-gray-300 text-[clamp(1rem,2vw,1.25rem)] max-w-lg mx-auto">
          唯有知晓暗语者，方能窥见其中奥秘
        </p>
      </div>

      <!-- 验证卡片 -->
      <div class="w-full max-w-md glass-effect rounded-2xl p-8 glow-border transition-all duration-500 hover:glow-border hover:shadow-lg hover:shadow-mystic-red/20">
        <form id="accessForm" class="space-y-6">
          <div class="space-y-2">
            <label for="passphrase" class="block text-white text-lg">请输入验证暗语</label>
            <div class="relative">
              <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400">
                <i class="fa fa-key"></i>
              </span>
              <input 
                type="text" 
                id="passphrase" 
                class="w-full pl-10 pr-4 py-3 bg-transparent border border-gray-600 rounded-lg focus:border-mystic-red focus:ring-1 focus:ring-mystic-red text-white transition-all duration-300"
                placeholder="输入暗语..."
                required
              >
            </div>
          </div>

          <!-- 错误提示 -->
          <div id="errorMessage" class="hidden text-mystic-red text-center py-2"></div>

          <!-- 按钮 -->
          <button 
            type="submit" 
            class="w-full bg-gradient-to-r from-mystic-blue to-mystic-red hover:opacity-90 text-white font-medium py-3 px-4 rounded-lg transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2"
          >
            <span>识别进入</span>
            <i class="fa fa-arrow-right"></i>
          </button>
        </form>

        <!-- 尝试次数提示 -->
        <div class="mt-6 text-center text-gray-400 text-sm">
          <span id="attemptsRemaining">剩余尝试次数: 5</span>
        </div>
      </div>

      <!-- 页脚 -->
      <div class="mt-16 text-gray-500 text-sm">
        <p>神秘知识只向有缘人敞开</p>
      </div>
    </div>

    <!-- 锁定提示模态框 -->
    <div id="lockModal" class="fixed inset-0 z-50 hidden items-center justify-center">
      <div class="absolute inset-0 bg-black/80 backdrop-blur-sm"></div>
      <div class="relative glass-effect rounded-xl p-8 max-w-md w-full mx-4 glow-border">
        <h2 class="text-2xl font-bold text-mystic-red mb-4 text-center">访问已锁定</h2>
        <p class="text-gray-300 text-center mb-6">
          多次验证失败，IP已被临时锁定。请稍后再试。
        </p>
        <div class="text-center">
          <button id="closeLockModal" class="px-6 py-2 bg-mystic-red/80 hover:bg-mystic-red text-white rounded-lg transition-all">
            关闭
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 验证逻辑脚本 -->
  <script>
    // 获取DOM元素
    const verificationScreen = document.getElementById('verificationScreen');
    const normalContent = document.getElementById('normalContent');
    const accessForm = document.getElementById('accessForm');
    const passphraseInput = document.getElementById('passphrase');
    const errorMessage = document.getElementById('errorMessage');
    const attemptsRemaining = document.getElementById('attemptsRemaining');
    const lockModal = document.getElementById('lockModal');
    const closeLockModal = document.getElementById('closeLockModal');
    
    // 更新剩余尝试次数显示
    function updateAttemptsDisplay() {
      const errorCount = parseInt(localStorage.getItem(ERROR_COUNT_KEY) || "0");
      const remaining = MAX_ERRORS - errorCount;
      attemptsRemaining.textContent = `剩余尝试次数: ${remaining}`;
    }
    
    // 显示错误消息
    function showError(message) {
      errorMessage.textContent = message;
      errorMessage.classList.remove('hidden');
      
      // 添加抖动动画
      passphraseInput.classList.add('animate-shake');
      setTimeout(() => {
        passphraseInput.classList.remove('animate-shake');
      }, 500);
    }
    
    // 隐藏错误消息
    function hideError() {
      errorMessage.classList.add('hidden');
    }
    
    // 锁定访问
    function lockAccess() {
      lockModal.style.display = 'flex';
      accessForm.reset();
      accessForm.classList.add('hidden');
    }
    
    // 验证通过后的处理
    function onVerificationSuccess(input) {
      localStorage.setItem(STORAGE_KEY, input);          // 记录验证状态
      localStorage.removeItem(ERROR_COUNT_KEY);          // 重置错误次数
      // 有效期后自动清除验证状态
      setTimeout(() => localStorage.removeItem(STORAGE_KEY), VALID_DURATION);
      
      // 显示正常内容，隐藏验证界面
      verificationScreen.classList.add('hidden');
      normalContent.classList.remove('hidden');
      
      // 初始化docsify
      initDocsify();
    }
    
    // 初始化docsify
    function initDocsify() {
      // 仅当验证通过时加载完整配置
    window.$docsify = {
      name: '国泰海通证券知识库',
      loadSidebar: true,
      subMaxLevel: 3,
      auto2top: true,
      coverpage: false, // 禁用封面页，使用README.md作为首页
      themeColor: '#1E3A8A', // 匹配项目"深空蓝"主色调
      homepage: 'README.md',
      loadNavbar: true, // 启用_navbar.md
      loadFooter: true, // 启用docsify静态页脚
        
      // 避免缓存问题
      noCache: true,
      
      // 路径别名配置 - 增强版
      alias: {
        "技术/热门指标公式集/": "技术/热门指标公式集完整.md",
        "热门指标公式集/": "技术/热门指标公式集完整.md",
        "技术/热门指标公式集": "技术/热门指标公式集完整.md",
        "热门指标公式集": "技术/热门指标公式集完整.md",
        // 添加更多通用别名确保路径匹配
        "README": "README.md",
        "readme": "README.md"
      },
      
      // 外部链接处理配置
      externalLinkTarget: '_blank',
      externalLinkRel: ['noopener', 'noreferrer'],
      
      // 路由模式配置 - 使用哈希模式确保兼容性
      routerMode: 'hash',
      
      // 确保链接解析正确
      subMaxLevel: 6,
      
      // Markdown增强配置
      markdown: {
        smartypants: true,
        breaks: true,
        tables: true,
        headerIds: true,
        auto2top: true
      },
      
      // 搜索插件配置
      search: {
        maxAge: 86400000,
        paths: 'auto',
        placeholder: '搜索知识库',
        noData: '没有找到相关内容',
        depth: 6,
        hideOtherSidebarContent: true
      },
      
      // 代码复制功能
      copyCode: {
        buttonText: '复制',
        errorText: '错误',
        successText: '已复制'
      },
      
      // 集成自定义插件
      plugins: [
        customPlugins,
        // 增强首页显示的自定义插件
        function(hook) {
          hook.ready(function() {
            // 优化：使用MutationObserver替代setTimeout，确保样式及时应用
            const observer = new MutationObserver((mutations) => {
              const homeContent = document.querySelector('.markdown-section');
              if (homeContent && (window.location.pathname === '/' || 
                  window.location.pathname.endsWith('/') || 
                  window.location.pathname.includes('README'))) {
                homeContent.classList.add('home-page');
                observer.disconnect(); // 生效后停止监听
              }
            });
            // 监听文档变化，确保内容加载完成
            observer.observe(document.body, { childList: true, subtree: true });
          });
        },

        // 修复链接点击问题的插件
        function(hook) {
          hook.doneEach(function() {
            // 修复内部链接
            const internalLinks = document.querySelectorAll('a[href]:not([href^="http"]):not([href^="#"]):not([href^="/"])');
            internalLinks.forEach(link => {
              const href = link.getAttribute('href');
              
              // 确保链接有正确的格式
              if (!href.endsWith('.md') && !href.includes('#')) {
                if (href.includes('.')) {
                  // 保留文件扩展名
                  link.setAttribute('href', href);
                } else {
                  // 为目录添加斜杠
                  link.setAttribute('href', href + '/');
                }
              }
              
              // 确保链接点击事件正常工作
              link.onclick = function(e) {
                e.preventDefault();
                const targetHref = this.getAttribute('href');
                console.log('处理链接点击:', targetHref);
                
                // 使用docsify的路由系统进行导航
                if (window.location.hash === '#/' + targetHref) {
                  // 如果点击的是当前页面的链接，刷新页面内容
                  window.location.reload();
                } else {
                  // 否则导航到目标页面
                  window.location.hash = '#/' + targetHref;
                }
              };
            });
            
            // 修复外部链接
            const externalLinks = document.querySelectorAll('a[href^="http"]');
            externalLinks.forEach(link => {
              // 确保外部链接有正确的target属性
              if (!link.hasAttribute('target')) {
                link.setAttribute('target', '_blank');
              }
              if (!link.hasAttribute('rel')) {
                link.setAttribute('rel', 'noopener noreferrer');
              }
            });
            
            console.log('链接修复完成，共修复内部链接:', internalLinks.length, '个，外部链接:', externalLinks.length, '个');
          });
        }
      ]
    };
    
    // 动态加载docsify脚本
    const script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/npm/docsify@4';
    script.onload = function() {
      // 依次加载其他必要的插件脚本
      loadPlugins();
    };
    document.head.appendChild(script);
  }
  
  // 加载docsify插件
  function loadPlugins() {
    // 添加搜索插件
    const searchScript = document.createElement('script');
    searchScript.src = '//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js';
    document.head.appendChild(searchScript);
    
    // 添加代码复制功能
    const copyCodeScript = document.createElement('script');
    copyCodeScript.src = '//cdn.jsdelivr.net/npm/docsify-copy-code/dist/docsify-copy-code.min.js';
    document.head.appendChild(copyCodeScript);
    
    // 添加MathJax支持数学公式渲染
    const mathJaxScript = document.createElement('script');
    mathJaxScript.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
    document.head.appendChild(mathJaxScript);
    
    // 加载链接点击调试代码
    loadDebugScript();
  }
  
  // 加载链接点击调试代码
  function loadDebugScript() {
    const debugScript = document.createElement('script');
    debugScript.innerHTML = `
      // 调试链接点击事件
      document.addEventListener('DOMContentLoaded', function() {
        console.log('页面加载完成，开始监听链接点击事件');
        
        // 捕获所有链接点击事件
        document.addEventListener('click', function(e) {
          const target = e.target.closest('a');
          if (target) {
            console.log('链接被点击:', target.href);
            console.log('链接属性:', {
              href: target.href,
              target: target.target,
              rel: target.rel,
              pathname: window.location.pathname
            });
            
            // 如果是内部链接，额外记录信息
            if (!target.href.startsWith('http')) {
              console.log('内部链接被点击，检查docsify路由状态');
            }
          }
        }, true);
        
        // 监听docsify路由变化
        window.addEventListener('hashchange', function() {
          console.log('路由哈希变化:', window.location.hash);
        });
        
        // 监控可能的JavaScript错误
        window.addEventListener('error', function(e) {
          console.error('JavaScript错误:', e.error.message, '发生在:', e.filename, '行号:', e.lineno);
        });
        
        console.log('docsify配置:', window.$docsify);
      });
    `;
    document.head.appendChild(debugScript);
  }
  
  // 表单提交处理
  accessForm.addEventListener('submit', function(e) {
    e.preventDefault();
    hideError();
    
    const input = passphraseInput.value.trim();
    const currentErrors = parseInt(localStorage.getItem(ERROR_COUNT_KEY) || "0");
    
    if (ACCESS_CODES.includes(input)) {
      // 验证成功
      onVerificationSuccess(input);
    } else {
      // 验证失败
      const newErrorCount = currentErrors + 1;
      localStorage.setItem(ERROR_COUNT_KEY, newErrorCount);
      updateAttemptsDisplay();
      
      if (newErrorCount >= MAX_ERRORS) {
        lockAccess();
        return;
      }
      
      // 根据失败次数显示不同的错误消息
      if (newErrorCount === 1) {
        showError('输入错误，请重新输入');
      } else {
        const remaining = MAX_ERRORS - newErrorCount;
        showError(`输入错误，剩余 ${remaining} 次验证机会。识别次数内未验证，将会锁定IP访问`);
      }
      
      // 清空输入框并聚焦
      passphraseInput.value = '';
      passphraseInput.focus();
    }
  });
  
  // 关闭锁定模态框
  closeLockModal.addEventListener('click', function() {
    lockModal.style.display = 'none';
  });
  
  // 添加输入动画效果
  passphraseInput.addEventListener('focus', function() {
    this.parentElement.classList.add('scale-105');
    this.parentElement.style.transition = 'transform 0.3s ease';
  });
  
  passphraseInput.addEventListener('blur', function() {
    this.parentElement.classList.remove('scale-105');
  });
  
  // 页面加载时检查验证状态
  document.addEventListener('DOMContentLoaded', function() {
    // 初始化尝试次数显示
    updateAttemptsDisplay();
    
    // 如果已锁定，直接拦截
    if (isLocked()) {
      lockAccess();
      return;
    }
    
    // 如果已验证，直接放行
    if (isVerified()) {
      onVerificationSuccess(localStorage.getItem(STORAGE_KEY));
    }
    
    // 聚焦输入框
    passphraseInput.focus();
  });
  </script>
  
  <!-- 定义docsify配置和插件 -->
  <script>
    // MathJax配置
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      }
    };
    
    // 自定义插件函数
    function customPlugins(hook) {
      // 创建DOM元素的辅助函数
      const createElement = (tag, className, content = '', attributes = {}) => {
        const element = document.createElement(tag);
        if (className) element.className = className;
        if (content) element.innerHTML = content;
        Object.keys(attributes).forEach(key => {
          element.setAttribute(key, attributes[key]);
        });
        return element;
      };
      
      // 增强的设备检测函数
      function detectDevice() {
        const isMobile = (
          /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||
          window.innerWidth <= 768 ||
          window.matchMedia('(max-width: 768px)').matches
        );
        
        const isTablet = (
          !isMobile && 
          window.innerWidth <= 1024 &&
          window.matchMedia('(max-width: 1024px)').matches
        );
        
        return {
          isMobile, 
          isTablet,
          isDesktop: !isMobile && !isTablet,
          orientation: window.innerWidth > window.innerHeight ? 'landscape' : 'portrait'
        };
      }
      
      hook.mounted(function() {
        // 检查是否已存在切换按钮容器
        let toggleContainer = document.querySelector('.sidebar-toggle-container');
        let toggleBtn = document.querySelector('.sidebar-toggle');
        let toggleText = document.querySelector('.toggle-text');
        
        // 如果没有容器，创建容器
        if (!toggleContainer) {
          toggleContainer = document.createElement('div');
          toggleContainer.className = 'sidebar-toggle-container';
          document.body.appendChild(toggleContainer);
        }
        
        // 如果没有按钮，创建按钮并添加到容器
        if (!toggleBtn) {
          toggleBtn = document.createElement('button');
          toggleBtn.className = 'sidebar-toggle';
          toggleBtn.innerHTML = '≡';
          toggleBtn.title = '切换菜单';
          toggleContainer.appendChild(toggleBtn);
        } else if (toggleBtn.parentNode !== toggleContainer) {
          // 如果按钮存在但不在容器中，移动到容器
          toggleContainer.appendChild(toggleBtn);
        }
        
        // 如果没有文字说明，创建并添加到容器
        if (!toggleText) {
          toggleText = document.createElement('div');
          toggleText.className = 'toggle-text';
          toggleText.textContent = '目录菜单';
          toggleContainer.appendChild(toggleText);
        } else if (toggleText.parentNode !== toggleContainer) {
          // 如果文字说明存在但不在容器中，移动到容器
          toggleContainer.appendChild(toggleText);
        }
        
        // 获取CSS动画兼容样式
        function getTransformStyle(value) {
          // IE11兼容性处理
          return {
            transform: value,
            msTransform: value,
            WebkitTransform: value
          };
        }
        
        // 初始化布局
        const initLayout = () => {
          const sidebar = document.querySelector('.sidebar');
          const mainContent = document.querySelector('.main-content');
          
          if (sidebar && mainContent) {
            const device = detectDevice();
            
            // 统一设置侧边栏样式
            sidebar.style.width = '280px';
            sidebar.style.position = 'fixed';
            sidebar.style.height = '100vh';
            sidebar.style.top = '0';
            sidebar.style.left = '0';
            sidebar.style.zIndex = '99';
            sidebar.style.overflowY = 'auto';
            
            // 根据设备类型和方向调整布局
            if (device.isMobile) {
              mainContent.style.marginLeft = '0';
              // 在移动设备上默认隐藏侧边栏
              if (!sidebar.classList.contains('open')) {
                Object.assign(sidebar.style, getTransformStyle('translateX(-100%)'));
              }
            } else if (device.isTablet) {
              // 平板设备根据横竖屏调整
              if (device.orientation === 'portrait') {
                mainContent.style.marginLeft = '0';
                if (!sidebar.classList.contains('open')) {
                  Object.assign(sidebar.style, getTransformStyle('translateX(-100%)'));
                }
              } else {
                mainContent.style.marginLeft = '280px';
                sidebar.classList.add('open');
                Object.assign(sidebar.style, getTransformStyle('translateX(0)'));
              }
            } else {
              // 桌面设备显示侧边栏
              mainContent.style.marginLeft = '280px';
              sidebar.classList.add('open');
              Object.assign(sidebar.style, getTransformStyle('translateX(0)'));
            }
            
            // 始终显示侧边栏按钮
            toggleBtn.style.display = 'flex';
          }
        };
        
        // 点击事件处理
        toggleBtn.onclick = function() {
          const sidebar = document.querySelector('.sidebar');
          const device = detectDevice();
          
          if (sidebar) {
            sidebar.classList.toggle('open');
            toggleBtn.innerHTML = sidebar.classList.contains('open') ? '×' : '≡';
            
            // 点击按钮时的视觉反馈 - 兼容性更强的实现
            Object.assign(toggleBtn.style, getTransformStyle('scale(0.9)'));
            setTimeout(() => {
              Object.assign(toggleBtn.style, getTransformStyle('scale(1)'));
            }, 100);
            
            // 根据状态调整侧边栏位置
            Object.assign(sidebar.style, getTransformStyle(
              sidebar.classList.contains('open') ? 'translateX(0)' : 'translateX(-100%)'
            ));
            
            // 添加遮罩层（移动设备和竖屏平板）
            if (device.isMobile || (device.isTablet && device.orientation === 'portrait')) {
              let overlay = document.querySelector('.sidebar-overlay');
              if (!overlay) {
                overlay = document.createElement('div');
                overlay.className = 'sidebar-overlay';
                overlay.onclick = () => {
                  sidebar.classList.remove('open');
                  toggleBtn.innerHTML = '≡';
                  Object.assign(sidebar.style, getTransformStyle('translateX(-100%)'));
                  overlay.classList.remove('active');
                };
                document.body.appendChild(overlay);
              }
              overlay.classList.toggle('active', sidebar.classList.contains('open'));
            }
          }
        };
        
        // 初始化
        initLayout();
        
        // 监听窗口大小变化和方向变化
        window.addEventListener('resize', initLayout);
        window.addEventListener('orientationchange', initLayout);
        
        // ESC键关闭侧边栏
        document.addEventListener('keydown', function(e) {
          const sidebar = document.querySelector('.sidebar');
          if (e.key === 'Escape' && sidebar && sidebar.classList.contains('open')) {
            sidebar.classList.remove('open');
            toggleBtn.innerHTML = '≡';
            Object.assign(sidebar.style, getTransformStyle('translateX(-100%)'));
          }
        });
        
        return toggleBtn;
      });
      
      // 初始化侧边栏切换按钮
      function setupSidebarToggle() {
        // 检查是否已存在返回顶部按钮
        const backToTopBtn = document.querySelector('#back-to-top');
        let backToTopText = document.querySelector('.back-to-top-text');
        
        if (!backToTopBtn) {
          // 返回顶部按钮已经在HTML中定义，这里只做增强
        }
        
        // 添加返回顶部按钮文字说明
        if (!backToTopText) {
          backToTopText = document.createElement('div');
          backToTopText.className = 'back-to-top-text';
          backToTopText.textContent = '返回顶部';
          document.body.appendChild(backToTopText);
        }
        
        // 添加鼠标悬停事件监听器，直接控制文字显示
        if (backToTopBtn) {
          backToTopBtn.addEventListener('mouseenter', function() {
            backToTopText.classList.add('show-tooltip');
          });
          
          backToTopBtn.addEventListener('mouseleave', function() {
            backToTopText.classList.remove('show-tooltip');
          });
        }
      }
      
      setupSidebarToggle();
      
      // 页面加载完成后执行的函数
      hook.ready(function() {
        // 确保页面加载时正确设置侧边栏状态
        setTimeout(() => {
          const sidebar = document.querySelector('.sidebar');
          const toggleBtn = document.querySelector('.sidebar-toggle');
          
          if (sidebar && toggleBtn) {
            // 优化：根据屏幕尺寸动态设置侧边栏状态
            if (window.innerWidth > 768) {
              sidebar.classList.add('open');
              toggleBtn.style.display = 'flex'; // 始终显示侧边栏按钮
              sidebar.style.transform = 'translateX(0)';
            } else {
              sidebar.classList.remove('open');
              toggleBtn.style.display = 'flex';
              sidebar.style.transform = 'translateX(-100%)';
            }
          }
        }, 100);
        
        // 直接添加静态页脚
        (function() {
          // 检查是否已经执行过
          if (window.footerCreated) return;
          window.footerCreated = true;
          
          // 立即执行，确保在DOM早期阶段就设置好布局
          function setupFooterLayout() {
            // 首先设置body为flex容器，确保后续元素能正确布局
            if (document.body) {
              Object.assign(document.body.style, {
                display: 'flex',
                flexDirection: 'column',
                minHeight: '100vh',
                margin: '0',
                padding: '0'
              });
            }
            
            // 确保.app-container容器占据剩余空间
            const appContainer = document.querySelector('.app-container');
            if (appContainer) {
              Object.assign(appContainer.style, {
                flex: '1 1 auto', /* 改为flex-grow:1，确保拉伸占据剩余空间 */
                display: 'flex',
                flexDirection: 'column',
                position: 'relative',
                paddingBottom: '120px' /* 给页脚留出空间，避免内容被遮挡 */
              });
            }
          }
          
          // 先设置好布局基础
          setupFooterLayout();
          
          // 然后创建页脚并添加到正确位置
          function createFooter() {
            // 优化：添加唯一标识避免多次创建
            if (document.getElementById('custom-footer')) return;
            
            // 先移除所有可能存在的页脚元素
            const allFooters = document.querySelectorAll('footer');
            allFooters.forEach(footer => footer.remove());
            
            // 直接添加静态页脚HTML - 调整样式使其更加明显
            const footerHtml = `
              <footer id="custom-footer" class="footer-custom" style="clear: both; width: 100%; background-color: rgba(15, 23, 42, 0.9); border-top: 2px solid #06B6D4; padding: 1.5rem 0px; text-align: center; box-shadow: rgba(0, 0, 0, 0.2) 0px -2px 10px; z-index: 999; position: relative;">
                <div class="footer-content">
                  <p style="color: #e2e8f0; font-size: 16px; margin-bottom: 8px;">© 2024 国泰海通证券知识库</p>
                  <p style="color: #94a3b8; font-size: 14px; margin-bottom: 12px;">免责声明：本知识库内容仅供参考，不构成任何投资建议</p>
                  <p style="font-size: 14px;">
                    <a href="https://huashu.web.app/" target="_blank" style="color: #06B6D4; text-decoration: none; margin: 0 8px;">话术平台</a> | 
                    <a href="https://moni.10jqka.com.cn/" target="_blank" style="color: #06B6D4; text-decoration: none; margin: 0 8px;">模拟炒股平台</a> | 
                    <a href="#" target="_blank" style="color: #06B6D4; text-decoration: none; margin: 0 8px;">九州旗舰店</a> | 
                    <a href="https://t.me/anyu168168" target="_blank" style="color: #06B6D4; text-decoration: none; margin: 0 8px;">Telegram社区</a> | 
                    <a href="https://nicevoice.org/zh" target="_blank" style="color: #06B6D4; text-decoration: none; margin: 0 8px;">语音服务</a> | 
                    <a href="#" target="_blank" style="color: #06B6D4; text-decoration: none; margin: 0 8px;">字幕移除工具</a> |
                    <a href="https://convertio.co/zh/" target="_blank" style="color: #06B6D4; text-decoration: none; margin: 0 8px;">Convertio文件转换工具</a>
                  </p>
                </div>
              </footer>
            `;
            
            // 将页脚添加到页面
            const footerContainer = document.createElement('div');
            footerContainer.innerHTML = footerHtml;
            const footer = footerContainer.firstElementChild;
            
            // 确保页脚始终添加到document.body的末尾
            document.body.appendChild(footer);
            
            console.log('页脚已添加到body末尾');
          }
          
          // 等待DOM完全加载后添加页脚
          document.addEventListener('DOMContentLoaded', function() {
            createFooter(); // 确保DOM完全生成后添加页脚
          });
        })();
        
        // 检查是否已存在返回顶部按钮容器
        let backToTopContainer = document.querySelector('.back-to-top-container');
        let backToTopBtn = document.querySelector('#back-to-top');
        let backToTopText = document.querySelector('.back-to-top-text');
        
        // 如果没有容器，创建容器
        if (!backToTopContainer) {
          backToTopContainer = document.createElement('div');
          backToTopContainer.className = 'back-to-top-container';
          document.body.appendChild(backToTopContainer);
        }
        
        // 如果没有按钮，创建按钮并添加到容器
        if (!backToTopBtn) {
          backToTopBtn = createElement('button', '', '↑', { id: 'back-to-top', title: '返回顶部' });
          backToTopContainer.appendChild(backToTopBtn);
          
          // 点击返回顶部
          backToTopBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
          });
        } else if (backToTopBtn.parentNode !== backToTopContainer) {
          // 如果按钮存在但不在容器中，移动到容器
          backToTopContainer.appendChild(backToTopBtn);
        }
        
        // 如果没有文字说明，创建并添加到容器
        if (!backToTopText) {
          backToTopText = document.createElement('div');
          backToTopText.className = 'back-to-top-text';
          backToTopText.textContent = '返回顶部';
          backToTopContainer.appendChild(backToTopText);
        } else if (backToTopText.parentNode !== backToTopContainer) {
          // 如果文字说明存在但不在容器中，移动到容器
          backToTopContainer.appendChild(backToTopText);
        }
        
        // 显示/隐藏返回顶部按钮
        window.addEventListener('scroll', function() {
          if (window.pageYOffset > 300) {
            document.body.classList.add('show-back-to-top');
          } else {
            document.body.classList.remove('show-back-to-top');
          }
        });
        
        // 优化布局处理，避免与docsify默认布局冲突
        const app = document.querySelector('#app');
        const sidebar = document.querySelector('.sidebar');
        const mainContent = document.querySelector('.main-content');
        
        // 仅当页面结构不完整时才进行修复
        if (app && !sidebar && !mainContent) {
          // 创建侧边栏和主内容区域，避免重复加载
          const sidebarElement = document.createElement('aside');
          sidebarElement.className = 'sidebar';
          
          const mainContentElement = document.createElement('main');
          mainContentElement.className = 'main-content';
          
          // 移动现有的markdown内容到主内容区域
          const markdownContent = document.querySelector('.markdown-section');
          if (markdownContent) {
            mainContentElement.appendChild(markdownContent);
          }
          
          // 清空并重建app内容
          app.innerHTML = '';
          app.appendChild(sidebarElement);
          app.appendChild(mainContentElement);
        }
        
        // 确保侧边栏内容只加载一次
        const sidebarNav = document.querySelector('.sidebar-nav');
        if (sidebar && !sidebarNav) {
          const nav = document.createElement('nav');
          nav.className = 'sidebar-nav';
          sidebar.appendChild(nav);
        }
        
        // 增强侧边栏显示 - 添加标题和图标
        setTimeout(() => {
          // 首先检查是否已添加过标题
          const sidebarNav = document.querySelector('.sidebar-nav');
          const existingTitle = document.querySelector('.sidebar-title');
          
          // 如果侧边栏导航存在且尚未添加标题，则添加"知识库目录"标题
          if (sidebarNav && !existingTitle) {
            const titleDiv = document.createElement('div');
            titleDiv.className = 'sidebar-title';
            titleDiv.style.padding = '10px 15px';
            titleDiv.style.fontSize = '16px';
            titleDiv.style.fontWeight = 'bold';
            titleDiv.style.color = '#0F52BA';
            titleDiv.style.borderBottom = '2px solid #D4AF37';
            titleDiv.style.marginBottom = '10px';
            titleDiv.style.textAlign = 'center';
            titleDiv.textContent = '知识库目录';
            
            // 将标题添加到侧边栏导航的最前面
            if (sidebarNav.firstChild) {
              sidebarNav.insertBefore(titleDiv, sidebarNav.firstChild);
            } else {
              sidebarNav.appendChild(titleDiv);
            }
          }
          
          const sidebarItems = document.querySelectorAll('.sidebar-nav > ul > li > a');
          
          // 定义图标映射
          const iconClasses = [
            'fas fa-home',
            'fas fa-file-alt',
            'fas fa-landmark',
            'fas fa-chart-line',
            'fas fa-chess',
            'fas fa-exclamation-triangle',
            'fas fa-tools',
            'fas fa-star'
          ];
          
          // 逐个处理侧边栏项，优化图标添加方式以保留原始功能
          sidebarItems.forEach((item, index) => {
            // 获取原始文本内容
            const originalText = item.textContent || item.innerText;
            
            // 移除可能存在的emoji图标
            const cleanText = originalText.replace(/[\u{1F300}-\u{1F6FF}\u{1F900}-\u{1F9FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}]/gu, '').trim();
            
            // 检查是否已包含图标，避免重复添加
            const existingIcon = item.querySelector('i');
            if (!existingIcon && index < iconClasses.length) {
              // 创建新的图标元素
              const iconElement = document.createElement('i');
              iconElement.className = iconClasses[index];
              iconElement.style.marginRight = '8px';
              
              // 保存原始事件监听器
              const originalClick = item.onclick;
              const originalHref = item.getAttribute('href');
              const originalTarget = item.getAttribute('target');
              
              // 清空并重新构建元素内容
              item.innerHTML = '';
              item.appendChild(iconElement);
              const textNode = document.createTextNode(cleanText);
              item.appendChild(textNode);
              
              // 恢复原始属性
              if (originalHref) item.setAttribute('href', originalHref);
              if (originalTarget) item.setAttribute('target', originalTarget);
              // 由于事件监听器可能是通过docsify动态添加的，这里不直接恢复
            }
          });
        }, 500); // 增加延迟时间，确保DOM完全加载
      });
    }
    
    // 仅当验证通过时加载完整配置
    if (isVerified()) {
      window.$docsify = {
        name: '国泰海通证券知识库',
        loadSidebar: true,
        subMaxLevel: 3,
        auto2top: true,
        coverpage: false, // 禁用封面页，使用README.md作为首页
        themeColor: '#1E3A8A', // 匹配项目"深空蓝"主色调
        homepage: 'README.md',
        loadNavbar: true, // 启用_navbar.md
        loadFooter: true, // 启用docsify静态页脚
      
      // 避免缓存问题
      noCache: true,
      
      // 路径别名配置 - 增强版
      alias: {
        "技术/热门指标公式集/": "技术/热门指标公式集完整.md",
        "热门指标公式集/": "技术/热门指标公式集完整.md",
        "技术/热门指标公式集": "技术/热门指标公式集完整.md",
        "热门指标公式集": "技术/热门指标公式集完整.md",
        // 添加更多通用别名确保路径匹配
        "README": "README.md",
        "readme": "README.md"
      },
      
      // 外部链接处理配置
      externalLinkTarget: '_blank',
      externalLinkRel: ['noopener', 'noreferrer'],
      
      // 路由模式配置 - 使用哈希模式确保兼容性
      routerMode: 'hash',
      
      // 确保链接解析正确
      subMaxLevel: 6,
      
      // Markdown增强配置
      markdown: {
        smartypants: true,
        breaks: true,
        tables: true,
        headerIds: true,
        auto2top: true
      },
      
      // 搜索插件配置
      search: {
        maxAge: 86400000,
        paths: 'auto',
        placeholder: '搜索知识库',
        noData: '没有找到相关内容',
        depth: 6,
        hideOtherSidebarContent: true
      },
      
      // 代码复制功能
      copyCode: {
        buttonText: '复制',
        errorText: '错误',
        successText: '已复制'
      },
      
      // 集成自定义插件
      plugins: [
        customPlugins,
        // 增强首页显示的自定义插件
        function(hook) {
          hook.ready(function() {
            // 优化：使用MutationObserver替代setTimeout，确保样式及时应用
            const observer = new MutationObserver((mutations) => {
              const homeContent = document.querySelector('.markdown-section');
              if (homeContent && (window.location.pathname === '/' || 
                  window.location.pathname.endsWith('/') || 
                  window.location.pathname.includes('README'))) {
                homeContent.classList.add('home-page');
                observer.disconnect(); // 生效后停止监听
              }
            });
            // 监听文档变化，确保内容加载完成
            observer.observe(document.body, { childList: true, subtree: true });
          });
        },

        // 修复链接点击问题的插件
        function(hook) {
          hook.doneEach(function() {
            // 修复内部链接
            const internalLinks = document.querySelectorAll('a[href]:not([href^="http"]):not([href^="#"]):not([href^="/"])');
            internalLinks.forEach(link => {
              const href = link.getAttribute('href');
              
              // 确保链接有正确的格式
              if (!href.endsWith('.md') && !href.includes('#')) {
                if (href.includes('.')) {
                  // 保留文件扩展名
                  link.setAttribute('href', href);
                } else {
                  // 为目录添加斜杠
                  link.setAttribute('href', href + '/');
                }
              }
              
              // 确保链接点击事件正常工作
              link.onclick = function(e) {
                e.preventDefault();
                const targetHref = this.getAttribute('href');
                console.log('处理链接点击:', targetHref);
                
                // 使用docsify的路由系统进行导航
                if (window.location.hash === '#/' + targetHref) {
                  // 如果点击的是当前页面的链接，刷新页面内容
                  window.location.reload();
                } else {
                  // 否则导航到目标页面
                  window.location.hash = '#/' + targetHref;
                }
              };
            });
            
            // 修复外部链接
            const externalLinks = document.querySelectorAll('a[href^="http"]');
            externalLinks.forEach(link => {
              // 确保外部链接有正确的target属性
              if (!link.hasAttribute('target')) {
                link.setAttribute('target', '_blank');
              }
              if (!link.hasAttribute('rel')) {
                link.setAttribute('rel', 'noopener noreferrer');
              }
            });
            
            console.log('链接修复完成，共修复内部链接:', internalLinks.length, '个，外部链接:', externalLinks.length, '个');
          });
        }
      ]
    };
    }
  </script>
  

  
  <!-- docsify核心脚本 -->
  <script src="https://cdn.jsdelivr.net/npm/docsify@4"></script>
  
  <!-- 添加搜索插件 -->
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
  
  <!-- 添加代码复制功能 -->
  <script src="//cdn.jsdelivr.net/npm/docsify-copy-code/dist/docsify-copy-code.min.js"></script>
  
  <!-- 添加MathJax支持数学公式渲染 -->
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  
  <!-- docsify页脚样式 -->
  <style>
    /* docsify页脚容器样式 */
    :root {
      --footer-height: 120px;
    }
    
    .app-container {
      min-height: 100vh;
      padding-bottom: var(--footer-height);
      position: relative;
    }
    
    /* docsify静态页脚样式 */
    .footer {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      background-color: rgba(15, 23, 42, 0.95);
      border-top: 2px solid #06B6D4;
      padding: 1rem 0;
      text-align: center;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
      z-index: 999;
      height: var(--footer-height);
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    
    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    .footer p {
      color: #e2e8f0;
      margin: 0 0 8px 0;
    }
    
    .footer .disclaimer {
      color: #94a3b8;
      font-size: 14px;
    }
    
    .footer-links {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 8px;
    }
    
    .footer-links a {
      color: #06B6D4;
      text-decoration: none;
      transition: color 0.3s ease;
    }
    
    .footer-links a:hover {
      color: #38BDF8;
    }
    
    .footer-links span {
      color: #94a3b8;
    }
    
    /* 响应式设计 */
    @media (max-width: 768px) {
      :root {
        --footer-height: 150px;
      }
      
      .footer-links {
        font-size: 14px;
      }
    }
  </style>
  
  <!-- 静态页脚内容 - docsify会自动识别和处理 -->
  <div id="footer" class="footer">
    <div class="footer-content">
      <p>© 2024 国泰海通证券知识库</p>
      <p class="disclaimer">免责声明：本知识库内容仅供参考，不构成任何投资建议</p>
      <div class="footer-links">
        <a href="https://huashu.web.app/" target="_blank">话术平台</a>
        <span>|</span>
        <a href="https://moni.10jqka.com.cn/" target="_blank">模拟炒股平台</a>
        <span>|</span>
        <a href="#" target="_blank">九州旗舰店</a>
        <span>|</span>
        <a href="https://t.me/anyu168168" target="_blank">Telegram社区</a>
        <span>|</span>
        <a href="https://nicevoice.org/zh" target="_blank">语音服务</a>
        <span>|</span>
        <a href="#" target="_blank">字幕移除工具</a>
        <span>|</span>
        <a href="https://convertio.co/zh/" target="_blank">Convertio文件转换工具</a>
      </div>
    </div>
  </div>

  </body>
</html>
